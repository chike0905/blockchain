@startuml
skinparam shadowing false
skinparam monochrome true
title Get New Block Sequence


Other_Node -> Message_Manager: Send New Block\nMessage
Message_Manager -> Node_Manager: Send Recieve\nMessage
Node_Manager -> Node_Manager: Check Message Type
activate Node_Manager
Node_Manager -> Chain_Manager: Verify New Block\nRequest
activate Chain_Manager
Chain_Manager -> Storage:Read Last Block
activate Storage
Storage --> Chain_Manager: Last Block
deactivate Storage
Chain_Manager -> Chain_Manager: Verify New Block
Chain_Manager --> Node_Manager: Pass/Fail
deactivate Chain_Manager
alt Pass
  Node_Manager -> Chain_Manager: Save Block Request
  activate Chain_Manager
  Chain_Manager -> TX_Manager: Remove TXs\nin New Block from TX Pool
  Chain_Manager -> Storage: Save Block
  Chain_Manager --> Node_Manager: Pass/Fail
  deactivate Chain_Manager
else Fail
  Node_Manager -> Chain_Resolver: Resolv Request
  ref over Chain_Resolver
    Resolve Block
  end ref
end
@enduml
